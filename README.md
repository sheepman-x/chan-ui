# 📈 缠论图表可视化系统

基于Python + Streamlit + Plotly实现的专业缠论技术分析工具

## 🚀 快速开始

### 1. 环境配置
```bash
# 创建虚拟环境
python3 -m venv chan-viz-env
source chan-viz-env/bin/activate

# 安装依赖
pip install streamlit plotly pandas baostock matplotlib ipython
```

### 2. 启动应用
```bash
streamlit run run_app.py
# 浏览器自动打开 http://localhost:8501
```

### 3. 使用验证
1. 浏览器打开 `http://localhost:8501`
2. 输入股票代码：`002415.SZ`
3. 点击"生成/更新图表"按钮
4. 即可看到包含K线+笔+中枢+买卖点的完整缠论图表

## ✨ 功能特性

### ✅ 第二阶段 - 核心指标移植完成！
- ✅ **chan.py数据移植**：直接调用原生的缠论算法结果
- ✅ **紧凑指标展示**：K线 + 笔 + 中枢 + 线段 + 买卖点
- ✅ **零过度设计**：无成交量、无动画、无多余优化
- ✅ **代码精简**：总计435行，330行专注核心功能

### 📊 核心功能展示
- **数据流**：实时利用chan.py的完整缠论计算结果
- **指标清晰**：
  - 🔴 红色线条：缠论笔划分标记（bi）
  - 🔵 蓝色区域：中枢分析和叠加（central_zone）  
  - 🟢 青色线条：线段走势展示（segment）
  - 🟢 绿色三角形：买入信号点（bsp_buy）
  - 🔴 红色三角形：卖出信号点（bsp_sell）

### ⚡ 即时使用体验
- **零等待**：直接调用原生算法，无缓存层复杂度
- **专注分析**：侧边栏选择股票 -> 选择周期 -> 一键生成图表
- **清晰交互**所有指标悬停查看详情

## 🏗️ 项目结构

```
chan-ui/
├── 📁 chan_viz/                 # 核心业务模块
│   ├── config_compiler.py       # 配置管理
│   ├── data_service.py         # 数据服务
│   ├── chart_render.py         # 图表渲染
│   └── streamlit_app.py        # 最小化原型
├── 📁 chan.py/                 # 缠论核心算法（子模块）
├── ✨ run_app.py               # 完整应用入口
├── 📋 streamlit_plan.md        # 详细实施计划
├── 🔒 .gitignore               # Git忽略规则
└── 📚 README.md               # 项目文档
```

## 🛠️ 开发进展

### ✅ 第一阶段 [已完成]
- **基础环境**：Python虚拟环境和依赖管理
- **最小原型**：60行代码的基础Streamlit界面
- **验证成功**：服务可正常启动并提供配置界面

### ✅ 第二阶段 [已完成]
- **架构重构**：从简单的60行扩展到完整的4个模块
- **功能增强**：添加数据服务、图表渲染、配置管理
- **用户体验**：三标签页专业界面设计
- **性能优化**：1小时缓存机制和优雅降级

### 🚦 第三阶段计划 [待开发]
- **实时数据**：接入真实市场数据源
- **策略回测**：基于缠论的简单策略验证
- **导出功能**：图表和数据导出
- **性能优化**：分页加载大数据量
- **移动适配**：响应式移动端界面

## 📊 技术栈

| 层级 | 技术 | 用途 |
|---|---|---|
| **前端** | Streamlit | 零前端开发的Web界面 |
| **图表** | Plotly | 交互式专业图表 |
| **数据源** | Baostock | 国内股票数据API |
| **核心** | chan.py | 缠论算法实现 |
| **缓存** | Streamlit cache | 数据缓存优化 |

## 🔧 配置参数

### 时间级别
- `K_1M` - 1分钟
- `K_5M` - 5分钟
- `K_15M` - 15分钟
- `K_30M` - 30分钟
- `K_60M` - 60分钟  
- `K_DAY` - 日线

### 缠论参数
- **严格笔**: 标准笔定义开关
- **中枢合并**: 合并相邻中枢
- **显示买卖点**: 交易信号标识
- **显示笔/线段/中枢**: 各元素独立开关

## 🌟 使用场景

### 📈 投资分析
- 股票技术分析
- 缠论交易信号识别
- 多时间周期对比

### 🔬 研究学习
- 缠论理论学习
- 策略回测验证
- 教学模式演示

### 💼 交易系统
- 实时监控提醒
- 策略信号推送
- 组合管理辅助

## 📞 技术支持

如发现任何问题或有功能建议，欢迎提Issue或Pull Request！

---

**项目状态**: 🟢 活跃开发中 | **版本**: v0.2.0 | **许可证**: MIT